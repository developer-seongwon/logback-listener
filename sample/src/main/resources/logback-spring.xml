<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <!-- 커스텀 컨텍스트 리스너 등록 -->
    <!-- <contextListener class="org.sw.logback.controller.LogContextListener" />-->

    <!-- 콘솔 출력용 appender -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- 파일 출력용 appender -->
<!--    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
    <appender name="FILE" class="org.sw.logback.RepairRollingFileAppender">
        <file>./logs/application.log</file>
        <rollingPolicy class="org.sw.logback.CronBasedRollingPolicy">
<!--        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">-->
<!--            <fileNamePattern>./logs/application.%d{yyyyMMddHHmm}.log</fileNamePattern>-->
            <fileNamePattern>./logs/%d{yyyyMMdd}/%d{dd}.%i</fileNamePattern>
            <cron>0 */5 * * * ?</cron>
            <maxFileSize>1KB</maxFileSize>
            <maxHistory>30</maxHistory>
            <totalSizeCap>10GB</totalSizeCap>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

<!--    &lt;!&ndash; 파일 출력용 appender &ndash;&gt;-->
<!--    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
<!--        <rollingPolicy class="org.sw.logback.CronRollingPolicy">-->
<!--            <fileNamePattern>./logs/application.%d{yyyy-MM-dd}.log</fileNamePattern>-->
<!--            <cron>0 * * * * *</cron>-->
<!--        </rollingPolicy>-->
<!--        &lt;!&ndash;        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">&ndash;&gt;-->
<!--        &lt;!&ndash;            <fileNamePattern>logs/application.%d{yyyy-MM-dd}.log</fileNamePattern>&ndash;&gt;-->
<!--        &lt;!&ndash;            <maxHistory>30</maxHistory>&ndash;&gt;-->
<!--        &lt;!&ndash;            <totalSizeCap>3GB</totalSizeCap>&ndash;&gt;-->
<!--        &lt;!&ndash;        </rollingPolicy>&ndash;&gt;-->
<!--        <encoder>-->
<!--            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>-->
<!--        </encoder>-->
<!--    </appender>-->

<!--    &lt;!&ndash; 에러 전용 파일 appender &ndash;&gt;-->
<!--    <appender name="ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
<!--        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">-->
<!--            <fileNamePattern>./logs/error.%d{yyyy-MM-dd}.log</fileNamePattern>-->
<!--            <cron>0 * * * * *</cron>-->
<!--        </rollingPolicy>-->
<!--        <encoder>-->
<!--            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>-->
<!--        </encoder>-->
<!--    </appender>-->


    <root level="DEBUG">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
<!--        <appender-ref ref="ERROR"/>-->
    </root>

    <!-- 특정 패키지 로그 레벨 설정 -->
    <logger name="org.sw.logback" level="DEBUG"/>
    <logger name="org.springframework" level="INFO"/>
    <logger name="org.hibernate" level="WARN"/>
</configuration>
